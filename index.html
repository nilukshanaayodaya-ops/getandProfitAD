<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GET AND PROFIT | Professional Trading Terminal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&family=JetBrains+Mono:wght@500&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@700&display=swap');
        
        :root {
            --primary: #10b981;
            --xmas-red: #ef4444;
            --bg-dark: #0a0c10;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg-dark);
            color: #f1f5f9;
            overflow-x: hidden;
            min-height: 100vh;
            background-image: 
                radial-gradient(circle at 50% 0%, rgba(239, 68, 68, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 100% 100%, rgba(16, 185, 129, 0.02) 0%, transparent 50%);
            position: relative;
        }

        /* Snowflake Animation */
        .snow-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .snowflake {
            position: absolute;
            top: -10px;
            color: white;
            font-size: 1em;
            user-select: none;
            z-index: 0;
            opacity: 0.3;
            animation: fall linear infinite;
        }

        @keyframes fall {
            to { transform: translateY(105vh); }
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            border-color: rgba(239, 68, 68, 0.2);
        }

        .xmas-text {
            font-family: 'Mountains of Christmas', cursive;
            color: var(--xmas-red);
            text-shadow: 0 0 10px rgba(239, 68, 68, 0.5);
        }

        .check-card {
            transition: all 0.2s ease;
            user-select: none;
        }

        .check-card.checked {
            background: rgba(16, 185, 129, 0.1);
            border-color: rgba(16, 185, 129, 0.5);
        }

        .btn-tab.active {
            background: #10b981;
            color: #000;
            font-weight: 800;
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.3);
        }

        @keyframes pulse-emerald {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.02); opacity: 0.9; }
        }

        .ready-active {
            animation: pulse-emerald 2s infinite ease-in-out;
        }

        #audio-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 10px;
            color: rgba(16, 185, 129, 0.5);
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 2px;
            pointer-events: none;
            z-index: 50;
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
    </style>
</head>
<body class="antialiased p-4 lg:p-8">

    <div class="snow-container" id="snow"></div>
    <div id="audio-indicator"><i class="fa-solid fa-music animate-pulse"></i> Auto-Sync Active</div>

    <div class="max-w-[1400px] mx-auto relative z-10">
        <div class="text-center mb-6">
            <h2 class="xmas-text text-3xl md:text-4xl animate-bounce">
                <i class="fa-solid fa-holly-berry mr-2"></i>
                Merry Christmas & Profitable Trading!
                <i class="fa-solid fa-tree ml-2"></i>
            </h2>
        </div>

        <header class="flex flex-col lg:flex-row justify-between items-center mb-10 gap-8">
            <div class="text-center lg:text-left">
                <h1 class="text-5xl font-black tracking-tighter text-white leading-none">
                    GET AND <span class="text-emerald-500">PROFIT</span>
                </h1>
                <p class="text-[10px] font-bold text-slate-500 tracking-[0.4em] uppercase mt-3">Precision Execution Environment</p>
            </div>

            <div class="flex items-center gap-2 bg-white/5 p-1.5 rounded-2xl border border-white/5">
                <div class="px-5 py-2 text-center">
                    <span class="block text-[8px] text-slate-500 uppercase font-bold">London</span>
                    <span id="clock-london" class="text-xs font-mono font-bold text-white">--:--:--</span>
                </div>
                <div class="px-5 py-2 text-center border-l border-white/10">
                    <span class="block text-[8px] text-slate-500 uppercase font-bold">New York</span>
                    <span id="clock-newyork" class="text-xs font-mono font-bold text-white">--:--:--</span>
                </div>
                <div class="px-5 py-2 text-center border-l border-white/10 bg-emerald-500/10 rounded-xl">
                    <span class="block text-[8px] text-emerald-500 uppercase font-bold">Local</span>
                    <span id="clock-colombo" class="text-xs font-mono font-bold text-emerald-400">--:--:--</span>
                </div>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <aside class="lg:col-span-3 space-y-6">
                <div class="glass-card p-8 rounded-3xl relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-2 opacity-20">
                        <i class="fa-solid fa-snowflake text-2xl"></i>
                    </div>
                    <h4 class="text-[10px] font-black text-emerald-500 uppercase tracking-widest mb-6 flex items-center gap-2">
                        <i class="fa-solid fa-brain"></i> Psychology Guard
                    </h4>
                    <div class="space-y-5">
                        <div>
                            <p class="text-[9px] text-slate-500 font-bold uppercase mb-1">Patience</p>
                            <p class="text-[12px] text-slate-400 italic leading-relaxed">"Hoda setup ekak enakal iwasala inna."</p>
                        </div>
                        <div>
                            <p class="text-[9px] text-slate-500 font-bold uppercase mb-1">Discipline</p>
                            <p class="text-[12px] text-slate-400 italic leading-relaxed">"Rule ekata pita kisima trade ekak danna epa."</p>
                        </div>
                    </div>
                </div>

                <div class="glass-card p-8 rounded-3xl">
                    <h4 class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4">Active Sessions</h4>
                    <div id="sessions-container" class="space-y-3"></div>
                </div>

                <div class="px-4 py-2">
                    <p class="text-[10px] font-bold text-slate-700 uppercase tracking-[0.2em] text-center lg:text-left">
                        Developed by <br>
                        <span class="text-slate-500">Ayodaya & Deshitha</span>
                    </p>
                </div>
            </aside>

            <main class="lg:col-span-9 space-y-6">
                <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
                    <div id="tabs-container" class="flex p-1 bg-white/5 rounded-2xl border border-white/5"></div>
                    <button onclick="resetChecks()" class="group flex items-center gap-2 px-5 py-2.5 rounded-xl border border-rose-500/20 bg-rose-500/5 text-[10px] font-bold uppercase tracking-wider text-rose-400 hover:bg-rose-500 hover:text-white transition-all">
                        <i class="fa-solid fa-trash-can transition-transform group-hover:rotate-12"></i> Clear All
                    </button>
                </div>

                <div class="bg-[#0f1115] rounded-[2.5rem] border border-white/5 shadow-2xl overflow-hidden relative">
                     <div class="absolute top-4 right-8 text-rose-500/20 text-4xl pointer-events-none">
                        <i class="fa-solid fa-gift"></i>
                     </div>

                    <div class="h-1.5 w-full bg-white/5">
                        <div id="progress-bar" class="h-full bg-emerald-500 transition-all duration-500 ease-out" style="width: 0%"></div>
                    </div>

                    <div class="p-8 lg:p-12">
                        <div class="flex flex-col md:flex-row justify-between items-end mb-10 gap-6">
                            <div>
                                <h2 id="active-title" class="text-4xl font-black text-white uppercase tracking-tight mb-2">--</h2>
                                <p class="text-sm text-slate-500">Confirm all requirements before placing the order.</p>
                            </div>
                            <div class="text-right">
                                <span class="text-[10px] font-bold text-slate-600 uppercase tracking-widest mb-1 block">Readiness</span>
                                <div id="progress-text" class="text-5xl font-black text-emerald-500 font-mono">0%</div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                            <div>
                                <h3 class="text-[11px] font-black text-slate-500 uppercase tracking-[0.3em] mb-6 flex items-center gap-3">
                                    <div class="w-2 h-2 rounded-full bg-emerald-500"></div> Technical Checklist
                                </h3>
                                <div id="tech-items" class="space-y-3"></div>
                            </div>
                            <div>
                                <h3 class="text-[11px] font-black text-slate-500 uppercase tracking-[0.3em] mb-6 flex items-center gap-3">
                                    <div class="w-2 h-2 rounded-full bg-rose-500"></div> Risk Protocols
                                </h3>
                                <div id="risk-items" class="space-y-3"></div>

                                <div id="verdict-box" class="mt-8 p-6 rounded-2xl border border-white/5 bg-white/[0.02] transition-all">
                                    <p id="verdict-text" class="text-xs font-medium text-slate-500 leading-relaxed italic">
                                        Waiting for verification...
                                    </p>
                                </div>
                            </div>
                        </div>

                        <button id="execute-btn" disabled class="w-full mt-10 py-8 rounded-3xl font-black text-[14px] tracking-[0.8em] uppercase transition-all duration-300 bg-white/5 text-slate-700 cursor-not-allowed border border-white/5">
                            Incomplete Protocol
                        </button>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        const setups = {
            hsTab: { title: "h & s Divergence", items: ["Divergence Check", "Daily & 4h Trend Alignment", "H&S Pattern Confirmation", "Neckline Break & Retest", "1h or 4h Structure OK", "1h or 4h SOS", "SOS Retest", "Candle Engulfing Break"], risk: ["Risk 1-2% Max", "Min 1:2 R:R Ratio", "News Calendar Clean"] },
            divTab: { title: "Normal Divergence", items: ["Divergence Check", "Trend Alignment", "AOI Break & Retest", "Structure Validation", "Sign of Strength", "SOS Retest", "Candle Confirmation"], risk: ["Risk 1-2% Max", "Min 1:2 R:R Ratio", "News Calendar Check"] },
            mainNormalTab: { title: "Main Setup", items: ["TF Trend Alignment", "No Divergence", "Identify Major AOI", "AOI Break & Retest", "2nd AOI Validation", "1h Structure (3 Candle Rule)", "1h SOS Confirmation", "SOS Retest"], risk: ["Risk 1-2% Max", "Min 1:2 R:R Ratio", "Economic Calendar Check"] }
        };

        let activeTab = 'hsTab';
        let checkedItems = {};
        const apiKey = "";
        let audioBlob = null;
        let audioStarted = false;

        async function initAudio() {
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: "I wish you a merry Christmas, I wish you a merry Christmas, I wish you a merry Christmas and a happy New Year." }] }],
                        generationConfig: {
                            responseModalities: ["AUDIO"],
                            speechConfig: { voiceConfig: { prebuiltVoiceConfig: { voiceName: "Puck" } } }
                        }
                    })
                });
                const result = await response.json();
                const pcmData = result.candidates[0].content.parts[0].inlineData.data;
                audioBlob = pcmToWav(pcmData, 24000);
            } catch (e) {
                console.error("Audio Load Error:", e);
            }
        }

        function pcmToWav(base64Data, sampleRate) {
            const buffer = Uint8Array.from(atob(base64Data), c => c.charCodeAt(0)).buffer;
            const wavHeader = new ArrayBuffer(44);
            const view = new DataView(wavHeader);
            const numChannels = 1;
            const bitsPerSample = 16;
            const byteRate = (sampleRate * numChannels * bitsPerSample) / 8;
            const blockAlign = (numChannels * bitsPerSample) / 8;
            const dataSize = buffer.byteLength;
            const writeString = (offset, string) => {
                for (let i = 0; i < string.length; i++) view.setUint8(offset + i, string.charCodeAt(i));
            };
            writeString(0, 'RIFF');
            view.setUint32(4, 36 + dataSize, true);
            writeString(8, 'WAVE');
            writeString(12, 'fmt ');
            view.setUint32(16, 16, true);
            view.setUint16(20, 1, true);
            view.setUint16(22, numChannels, true);
            view.setUint32(24, sampleRate, true);
            view.setUint32(28, byteRate, true);
            view.setUint16(32, blockAlign, true);
            view.setUint16(34, bitsPerSample, true);
            writeString(36, 'data');
            view.setUint32(40, dataSize, true);
            return new Blob([wavHeader, buffer], { type: 'audio/wav' });
        }

        function playAudio() {
            if (!audioBlob) return;
            const audio = new Audio(URL.createObjectURL(audioBlob));
            audio.volume = 0.05;
            audio.play().catch(() => { /* Silent Fail until interaction */ });
        }

        function startLoop() {
            if (audioStarted) return;
            audioStarted = true;
            playAudio();
            setInterval(playAudio, 25000);
            document.removeEventListener('click', startLoop);
            document.removeEventListener('keydown', startLoop);
        }

        function createSnow() {
            const container = document.getElementById('snow');
            for (let i = 0; i < 50; i++) {
                const flake = document.createElement('div');
                flake.className = 'snowflake';
                flake.innerHTML = 'â€¢';
                flake.style.left = Math.random() * 100 + 'vw';
                flake.style.animationDuration = (Math.random() * 3 + 2) + 's';
                flake.style.animationDelay = Math.random() * 5 + 's';
                flake.style.fontSize = (Math.random() * 10 + 10) + 'px';
                container.appendChild(flake);
            }
        }

        function updateClocks() {
            const opt = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
            document.getElementById('clock-london').innerText = new Date().toLocaleTimeString('en-GB', { ...opt, timeZone: 'Europe/London' });
            document.getElementById('clock-newyork').innerText = new Date().toLocaleTimeString('en-GB', { ...opt, timeZone: 'America/New_York' });
            document.getElementById('clock-colombo').innerText = new Date().toLocaleTimeString('en-GB', { ...opt, timeZone: 'Asia/Colombo' });
        }

        function updateSessions() {
            const hr = new Date().getUTCHours();
            const sess = [{n:'London',s:8,e:17}, {n:'New York',s:13,e:22}, {n:'Tokyo',s:0,e:9}];
            document.getElementById('sessions-container').innerHTML = sess.map(s => {
                const open = hr >= s.s && hr < s.e;
                return `
                <div class="flex items-center justify-between px-4 py-3 rounded-xl border ${open ? 'bg-emerald-500/10 border-emerald-500/20 text-emerald-400' : 'border-white/5 text-slate-600 opacity-60'}">
                    <span class="text-[10px] font-bold uppercase tracking-wider">${s.n}</span>
                    <span class="text-[9px] font-black">${open ? 'OPEN' : 'CLOSED'}</span>
                </div>`;
            }).join('');
        }

        function toggleItem(tab, idx) {
            const id = `${tab}-${idx}`;
            checkedItems[id] = !checkedItems[id];
            render();
        }

        function resetChecks() {
            checkedItems = {};
            render();
        }

        function render() {
            const tabs = document.getElementById('tabs-container');
            tabs.innerHTML = Object.entries(setups).map(([k, v]) => `
                <button onclick="activeTab='${k}'; render()" class="btn-tab px-6 py-2 rounded-xl text-[10px] font-bold uppercase tracking-wider transition-all ${activeTab === k ? 'active' : 'text-slate-500 hover:text-slate-300'}">
                    ${v.title}
                </button>
            `).join('');

            const s = setups[activeTab];
            document.getElementById('active-title').innerText = s.title;
            document.getElementById('tech-items').innerHTML = s.items.map((it, i) => renderCard(it, activeTab, i)).join('');
            document.getElementById('risk-items').innerHTML = s.risk.map((it, i) => renderCard(it, activeTab, s.items.length + i)).join('');

            const total = s.items.length + s.risk.length;
            const done = [...s.items, ...s.risk].filter((_, i) => checkedItems[`${activeTab}-${i}`]).length;
            const prog = Math.round((done / total) * 100);

            document.getElementById('progress-bar').style.width = `${prog}%`;
            document.getElementById('progress-text').innerText = `${prog}%`;

            const btn = document.getElementById('execute-btn');
            const vBox = document.getElementById('verdict-box');
            const vTxt = document.getElementById('verdict-text');

            if (prog === 100) {
                btn.disabled = false;
                btn.className = "w-full mt-10 py-8 rounded-3xl font-black text-[14px] tracking-[0.8em] uppercase transition-all duration-300 bg-emerald-500 text-black ready-active shadow-2xl shadow-emerald-500/20";
                btn.innerText = "Execute Protocol";
                vBox.className = "mt-8 p-6 rounded-2xl border border-emerald-500/30 bg-emerald-500/5";
                vTxt.innerText = "All signals verified. Ready for market execution.";
                vTxt.classList.replace('text-slate-500', 'text-emerald-400');
            } else {
                btn.disabled = true;
                btn.className = "w-full mt-10 py-8 rounded-3xl font-black text-[14px] tracking-[0.8em] uppercase transition-all duration-300 bg-white/5 text-slate-700 border border-white/5 cursor-not-allowed";
                btn.innerText = "Incomplete Protocol";
                vBox.className = "mt-8 p-6 rounded-2xl border border-white/5 bg-white/[0.02]";
                vTxt.innerText = "Waiting for verification...";
                vTxt.classList.add('text-slate-500');
                vTxt.classList.remove('text-emerald-400');
            }
        }

        function renderCard(label, tab, idx) {
            const checked = !!checkedItems[`${tab}-${idx}`];
            return `
                <div onclick="toggleItem('${tab}', ${idx})" class="check-card flex items-center justify-between p-4 rounded-xl border border-white/5 bg-white/[0.01] cursor-pointer hover:border-white/20 transition-all ${checked ? 'checked' : ''}">
                    <div class="flex items-center gap-4">
                        <div class="w-5 h-5 rounded border-2 transition-all flex items-center justify-center ${checked ? 'bg-emerald-500 border-emerald-500' : 'border-white/10'}">
                            ${checked ? '<i class="fa-solid fa-check text-[10px] text-black font-bold"></i>' : ''}
                        </div>
                        <span class="text-sm font-semibold tracking-tight ${checked ? 'text-white' : 'text-slate-400'}">${label}</span>
                    </div>
                </div>
            `;
        }

        window.onload = () => {
            createSnow();
            updateClocks();
            updateSessions();
            initAudio();
            render();
            setInterval(updateClocks, 1000);
            setInterval(updateSessions, 30000);
            
            // Interaction to enable autoplay as per browser rules
            document.addEventListener('click', startLoop);
            document.addEventListener('keydown', startLoop);
        }
    </script>
</body>
</html>
